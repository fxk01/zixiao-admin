<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="这是一个 topic 页面">
    <meta name="keywords" content="index">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp" />
    <meta name="apple-mobile-web-app-title" content="Amaze UI" />
    <link rel="icon" type="image/png" href="../../static/assets/i/favicon.png">
    <link rel="apple-touch-icon-precomposed" href="../../static/assets/i/app-icon72x72@2x.png">
    <link rel="stylesheet" href="../../static/assets/css/amazeui.min.css" />
    <link href="../../static/assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../static/assets/css/bootstrap-fileinput.css" rel="stylesheet">
    <link rel="stylesheet" href="../../static/assets/css/app.css">
    <link rel="stylesheet" href="./topic.css">
    <title>话题</title>
    <style>
        .thumbImage{
            width: 60px;
            height: auto;
        }
        .bgImage{
            width: 180px;
            height: auto;
        }
    </style>
</head>
<body data-type="widgets" id="body">
<div class="am-g tpl-g">
    <!-- 头部 -->
    <header id="hd">
        <div class="am-fl tpl-header-logo">
            <a href="javascript:"><img src="../../static/assets/img/bomBigOld.png" alt=""></a>
        </div>
        <div class="tpl-header-fluid">
            <!-- 侧边切换 -->
            <div class="am-fl tpl-header-switch-button am-icon-list">
                <span></span>
            </div>
            <!-- 搜索 -->
            <!--<div class="am-fl tpl-header-search">-->
            <!--<form class="tpl-header-search-form" action="javascript:;">-->
            <!--<button class="tpl-header-search-btn am-icon-search"></button>-->
            <!--<input class="tpl-header-search-box" type="text" placeholder="搜索内容...">-->
            <!--</form>-->
            <!--</div>-->
            <!-- 其它功能-->
            <div class="am-fr tpl-header-navbar"></div>
        </div>
    </header>
    <!-- 风格切换 -->
    <div class="tpl-skiner">
        <div class="tpl-skiner-toggle am-icon-cog">
        </div>
        <div class="tpl-skiner-content">
            <div class="tpl-skiner-content-title">
                选择主题
            </div>
            <div class="tpl-skiner-content-bar">
                <span class="skiner-color skiner-white" data-color="theme-white"></span>
                <span class="skiner-color skiner-black" data-color="theme-black"></span>
            </div>
        </div>
    </div>
    <!-- 侧边导航栏 -->
    <%-include ../../components/leftlist/leftlist.html %>

    <!-- 内容区域 -->
    <div class="tpl-content-wrapper">
        <div class="row-content am-cf">
            <div class="row">
                <div class="am-u-sm-12 am-u-md-12 am-u-lg-12">
                    <div class="widget am-cf">
                        <div class="widget-head am-cf">
                            <div class="widget-title am-cf am-fl" style="line-height: 30px;">话题列表</div>
                            <div class="am-u-sm-12 am-u-md-6 am-u-lg-3 am-fl">
                                <div class="am-form-group tpl-table-list-select" style="margin-bottom: 0;">
                                    <select id="js-selected" data-am-selected="{btnSize: 'sm'}">
                                        <option value="0" selected>未发布</option>
                                        <option value="1">已发布</option>
                                        <option value="2">已删除</option>
                                    </select>
                                </div>
                            </div>
                            <div class="am-btn-group am-btn-group-xs am-fr" style="margin-right: 13px;">
                               <button type="button" id="create"  class="am-btn am-btn-default am-btn-success addAns"><span class="am-icon-plus"></span> 新建</button>
                            </div>
                        </div>
                        <div class="widget-body  am-fr">
                            <div class="am-u-sm-12" style="min-height: 455px;">
                                <table width="100%" class="am-table am-table-compact am-table-striped tpl-table-black " id="example-r">
                                    <thead>
                                    <tr>
                                        <!--style="width: 230px;"-->
                                        <th>话题ID</th>
                                        <th>标题</th>
                                        <th>缩略图</th>
                                        <th>背景图</th>
                                        <th>创建时间</th>  <!-- 操作时间 -->
                                        <th>操作</th>
                                    </tr>
                                    </thead>
                                    <tbody id="calendarTbBody"></tbody>
                                </table>
                            </div>
                            <div class="am-u-lg-12 am-cf" id="pageCurr">
                                <!--<div class="am-fr" id="page0">-->
                                    <!--<ul class="am-pagination tpl-pagination"></ul>-->
                                <!--</div>-->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!--上传缩略图-->
<div class="am-popup" id="thumbnailUp">
    <div class="am-popup-inner">
        <div class="am-popup-hd">
            <h4 class="am-popup-title" id="header_popTitle">上传图片</h4>
            <span data-am-modal-close class="am-close">&times;</span>
        </div>
        <div class="am-popup-bd">
            <div class="am-form-group">
                <h3>话题id</h3>
                <input type="text" placeholder="商品id" value="" class="am-modal-prompt-input" name="productid" id="thumbnailUpId" disabled>
            </div>
            <form id="uploadForm" enctype='multipart/form-data'>
                <div class="form-group">
                    <div class="h4">图片预览</div>
                    <div class="fileinput fileinput-new" data-provides="fileinput"  id="exampleInputUpload">
                        <div class="fileinput-new thumbnail" style="width: 200px;height: auto;max-height:150px;">
                            <img id='picImg' style="width: 100%;height: auto;max-height: 140px;" src="../../static/assets/images/noimage.png" alt="" />
                        </div>
                        <div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;"></div>
                        <div>
                                    <span class="btn btn-primary btn-file">
                                        <span class="fileinput-new">选择文件</span>
                                        <span class="fileinput-exists">换一张</span>
                                        <input type="file" name="file" id="picID" data-preview-file-type="text" accept="image/gif,image/jpeg,image/x-png"/>
                                        <input type="hidden" name="id" id="productidSvt" value="">
                                        <!--<input type="hidden" name="type" id="producttypeSvt" value="">-->
                                        <input type="hidden" name="type" id="producttypeSvt" value="">
                                    </span>
                            <a href="javascript:" class="btn btn-warning fileinput-exists" data-dismiss="fileinput">移除</a>
                        </div>
                    </div>
                </div>
                <button type="button" id="uploadSubmit" class="btn btn-info">提交</button>
            </form>
        </div>
    </div>
</div>

<!--上传背景图-->
<!--<div class="am-popup" id="backgroundUp">-->
    <!--<div class="am-popup-inner">-->
        <!--<div class="am-popup-hd">-->
            <!--<h4 class="am-popup-title">上传背景图</h4>-->
            <!--<span data-am-modal-close class="am-close">&times;</span>-->
        <!--</div>-->
        <!--<div class="am-popup-bd">-->
            <!--<div class="am-form-group">-->
                <!--<h3>商品id</h3>-->
                <!--<input type="text" placeholder="商品id" value="" class="am-modal-prompt-input" name="productid" id="thumbnailUpBj" disabled>-->
            <!--</div>-->
            <!--<form id="uploadFormBj" enctype='multipart/form-data'>-->
                <!--<div class="form-group">-->
                    <!--<div class="h4">图片预览</div>-->
                    <!--<div class="fileinput fileinput-new" data-provides="fileinput"  id="exampleInputUploadBj">-->
                        <!--<div class="fileinput-new thumbnail" style="width: 200px;height: auto;max-height:150px;">-->
                            <!--<img id='picImgBj' style="width: 100%;height: auto;max-height: 140px;" src="../../static/assets/images/noimage.png" alt="" />-->
                        <!--</div>-->
                        <!--<div class="fileinput-preview fileinput-exists thumbnail" style="max-width: 200px; max-height: 150px;"></div>-->
                        <!--<div>-->
                                    <!--<span class="btn btn-primary btn-file">-->
                                        <!--<span class="fileinput-new">选择文件</span>-->
                                        <!--<span class="fileinput-exists">换一张</span>-->
                                        <!--<input type="file" name="file" id="picIDBj" data-preview-file-type="text" accept="image/gif,image/jpeg,image/x-png"/>-->
                                        <!--<input type="hidden" name="productid" id="productidSvtBj" value="">-->
                                    <!--</span>-->
                            <!--<a href="javascript:" class="btn btn-warning fileinput-exists" data-dismiss="fileinput">移除</a>-->
                        <!--</div>-->
                    <!--</div>-->
                <!--</div>-->
                <!--<button type="button" id="uploadSubmitBj" class="btn btn-info">提交</button>-->
            <!--</form>-->
        <!--</div>-->
    <!--</div>-->
<!--</div>-->

<div class="am-popup" id="my-popupNew" style="width: 700px;">
    <div class="am-popup-inner" style="overflow: scroll;">
        <div class="am-popup-hd">
            <h4 class="am-popup-title">新建话题</h4>
            <span data-am-modal-close class="am-close">&times;</span>
        </div>
        <div class="am-popup-bd">
            <form class="am-form am-form-horizontal" id="createFormUp">
                <div class="am-form-group">
                    <label class="am-u-sm-2 am-form-label">话题标题</label>
                    <div class="am-u-sm-10">
                        <input type="text" placeholder="请输入话题的标题" name="title" class="st-control block" data-valid-control="tpcModuleTitle">
                    </div>
                    <div class="st-error" data-valid-error="tpcModuleTitle"></div>
                </div>

                <div class="am-form-group">
                    <label class="am-u-sm-2 am-form-label">话题描述</label>
                    <div class="am-u-sm-10">
                        <textarea  placeholder="请输入话题介绍" class="st-control block" name="description"  data-valid-control="tpcModuleDesr"></textarea>
                    </div>
                    <div class="st-error" data-valid-error="tpcModuleDesr"></div>
                </div>

                <div class="am-form-group" style="display: none;">
                    <label class="am-u-sm-2 am-form-label">话题介绍</label>
                    <div class="am-u-sm-10">
                        <div class="ckeditor_d">
                            <textarea id="introducenew"></textarea>
                        </div>
                        <!--<textarea class="am-validate" rows="20" minlength="1" cols="100" id="myue" style="visibility:hidden;"></textarea>-->
                    </div>
                </div>

                <div class="am-form-group">
                    <div class="am-u-sm-10 am-u-sm-offset-2">
                        <button  class="am-btn am-btn-primary btn-loading-example subEditGoods" data-am-loading="{spinner: 'circle-o-notch', loadingText: '正在提交...', resetText: '提交'}">保存话题</button>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>

<!--编辑话题-->
<div class="am-popup" id="my-popup" style="width: 700px;">
    <div class="am-popup-inner" style="overflow: scroll;">
        <div class="am-popup-hd">
            <h4 class="am-popup-title">编辑话题</h4>
            <span data-am-modal-close class="am-close">&times;</span>
        </div>
        <div class="am-popup-bd">
            <form class="am-form am-form-horizontal" id="editFormUp">
                <div class="am-form-group">
                    <label class="am-u-sm-2 am-form-label">话题Id</label>
                    <div class="am-u-sm-10">
                        <input type="text" id="topicTid"  placeholder="请输入话题的id"  class="st-control block" name="tid" >
                    </div>
                    <!--<div class="st-error" data-valid-error="tpcModuleTid"></div>-->
                </div>

                <div class="am-form-group">
                    <label class="am-u-sm-2 am-form-label">话题标题</label>
                    <div class="am-u-sm-10">
                        <input type="text" id="topicTit" placeholder="请输入话题的标题" class="st-control block" name="title" data-valid-control="tpcModuleTitle">
                    </div>
                    <div class="st-error" data-valid-error="tpcModuleTitle"></div>
                </div>

                <div class="am-form-group">
                    <label class="am-u-sm-2 am-form-label">话题描述</label>
                    <div class="am-u-sm-10">
                        <textarea id="topicDesr"  placeholder="请输入话题介绍" class="st-control block" name="description" data-valid-control="tpcModuleDesr"></textarea>
                    </div>
                    <div class="st-error" data-valid-error="tpcModuleDesr"></div>
                </div>

                <div class="am-form-group" style="display: none">
                    <label class="am-u-sm-2 am-form-label">话题介绍</label>
                    <div class="am-u-sm-10">
                        <div class="ckeditor_d">
                            <textarea id="introduce2"></textarea>
                        </div>
                        <!--<textarea class="am-validate" rows="20" minlength="1" cols="100" id="myue" style="visibility:hidden;"></textarea>-->
                    </div>
                </div>

                <div class="am-form-group">
                    <div class="am-u-sm-10 am-u-sm-offset-2">
                        <button id="editSub" class="am-btn am-btn-primary btn-loading-example subEditGoods" data-am-loading="{spinner: 'circle-o-notch', loadingText: '正在提交...', resetText: '提交'}">保存话题</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="am-popup" id="my-add" style="width: 700px;">
    <div class="am-popup-inner" style="overflow: scroll;">
        <div class="am-popup-hd">
            <h4 class="am-popup-title">添加话题</h4>
            <span data-am-modal-close class="am-close">&times;</span>
        </div>
        <div class="am-popup-bd">
            <form class="am-form am-form-horizontal" id="upForm">
                <div class="am-form-group">
                    <label class="am-u-sm-2 am-form-label">话题Id</label>
                    <div class="am-u-sm-10">
                        <input type="text"  placeholder="请输入话题的id"  class="st-control block" id="mewModuleNameId" name="tid">
                    </div>
                </div>

                <div class="am-form-group">
                    <label class="am-u-sm-2 am-form-label">话题标题</label>
                    <div class="am-u-sm-10">
                        <input type="text" placeholder="请输入话题的标题" class="st-control block" id="mewModuleName" name="title" data-valid-control="mewModuleTile">
                    </div>
                    <div class="st-error" data-valid-error="mewModuleTile"></div>
                </div>

                <div class="am-form-group">
                    <label class="am-u-sm-2 am-form-label">话题描述</label>
                    <div class="am-u-sm-10">
                        <textarea  placeholder="请输入话题介绍" class="st-control block" name="description" data-valid-control="nonEmptyMaterial"></textarea>
                    </div>
                    <div class="st-error" data-valid-error="nonEmptyMaterial"></div>
                </div>

                <div class="am-form-group">
                    <label class="am-u-sm-2 am-form-label">话题介绍</label>
                    <div class="am-u-sm-10">
                        <div class="ckeditor_d">
                            <textarea id="introduce" ></textarea>
                        </div>
                        <!--<textarea class="am-validate" rows="20" minlength="1" cols="100" id="myue" style="visibility:hidden;"></textarea>-->
                    </div>
                </div>

                <div class="am-form-group">
                    <div class="am-u-sm-10 am-u-sm-offset-2">
                        <button type="submit" class="am-btn am-btn-primary btn-loading-example subEditGoods" data-am-loading="{spinner: 'circle-o-notch', loadingText: '正在提交...', resetText: '提交'}">保存话题</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

<div class="am-modal am-modal-alert" tabindex="-1" id="my-alert_release">
    <div class="am-modal-dialog">
        <div class="am-modal-bd">
            发布成功！
        </div>
        <div class="am-modal-footer">
            <span class="am-modal-btn">确定</span>
        </div>
    </div>
</div>

<div class="am-modal am-modal-confirm" tabindex="-1" id="my-confirm_release">
    <div class="am-modal-dialog">
        <div class="am-modal-hd">提示</div>
        <div class="am-modal-bd">
           是否发布该话题?
        </div>
        <div class="am-modal-footer">
            <span class="am-modal-btn" data-am-modal-cancel>取消</span>
            <span class="am-modal-btn" data-am-modal-confirm>确定</span>
        </div>
    </div>
</div>

<div class="am-modal am-modal-alert" tabindex="-1" id="my-alert_del">
    <div class="am-modal-dialog">
        <div class="am-modal-bd">
            删除成功！
        </div>
        <div class="am-modal-footer">
            <span class="am-modal-btn">确定</span>
        </div>
    </div>
</div>

<div class="am-modal am-modal-confirm" tabindex="-1" id="my-confirm_del">
    <div class="am-modal-dialog">
        <div class="am-modal-hd">提示</div>
        <div class="am-modal-bd">
            是否删除该话题?
        </div>
        <div class="am-modal-footer">
            <span class="am-modal-btn" data-am-modal-cancel>取消</span>
            <span class="am-modal-btn" data-am-modal-confirm>确定</span>
        </div>
    </div>
</div>

<script id="calendarTpl" type="text/x-dot-template">
    {{ for(var prop in it) { }}
    <tr class="even gradeC">
        <td>{{=it[prop].id}}</td>
        <td>{{=it[prop].title}}</td>
        <td>
            <image class="thumbImage" src="{{=it[prop].top_miu}}"></image>
        </td>
        <td>
            <image class="bgImage" src="{{=it[prop].top_image}}"></image>
            <!--<div class="tpl-table-black-operation">-->
            <!--<a href="javascript:">-->
            <!--<i class="am-icon-pencil"></i> 编辑-->
            <!--</a>-->
            <!--<a href="javascript:" class="tpl-table-black-operation-del">-->
            <!--<i class="am-icon-trash"></i> 删除-->
            <!--</a>-->
            <!--</div>-->
        </td>
        <td> {{=it[prop].createTime}}</td>
        <td>
            <div class="tpl-table-black-operation">
                <!--onclick="topicPage.editGoods(this)"-->
                <a href="javascript:" data-id='{{=it[prop].id}}' data-title='{{=it[prop].title}}' data-introduce='{{=it[prop].introduce}}' data-description={{=it[prop].description}} class="editOffering edit" >

                    <i class="am-icon-pencil"></i> 编辑
                </a>
                <!--onclick="topicPage.Release(this)"-->
                <a href="javascript:" data-id={{=it[prop].id}} class="tpl-table-black-operation-del release" >
                    发布
                </a>
                <!--onclick="topicPage.deleteGoodsId(this)"-->
                <a href="javascript:" data-id={{=it[prop].id}} class="tpl-table-black-operation-del deleteImg delete" >
                    <i class="am-icon-trash"></i> 删除
                </a>
                <!--onclick="topicPage.thumbnailUp(this)"-->
                <a href="javascript:" data-id={{=it[prop].id}} class="tpl-table-black-operation-del thumbImgUp">
                   上传缩略图
                </a>
                <!--onclick="topicPage.backgroundUp(this)"-->

                <a href="javascript:" data-id={{=it[prop].id}} class="tpl-table-black-operation-del bgImgUp" >
                    上传背景图
                </a>

                <a href="../addqsn/addqsn.html?tid={{=it[prop].id}}&title={{=it[prop].title}}&page=1" class="tpl-table-black-operation-del addQuestion" >
                    <!--&lt;!&ndash;data-am-modal="{target: '#my-add'}"&ndash;&gt;  有蒙版-->
                    添加问题
                </a>
            </div>
        </td>
    </tr>
    {{ } }}
</script>
<script type="text/javascript" data-main="../../main.js" src="../../libs/requireJs/require.js"></script>
<script src="../../static/assets/js/ckeditor/ckeditor.js"></script>
<!--<script src="../../static/assets/js/jquery.min.js"></script>-->
<!--<script src="../../static/assets/js/bootstrap-fileinput.js"></script>-->
</body>
</html>